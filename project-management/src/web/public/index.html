<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Asabaal Music Business - Project Management</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">
        Asabaal Music Business
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="#" data-page="dashboard">Dashboard</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-page="projects">Projects</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-page="tasks">Tasks</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-page="timeline">Timeline</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container mt-4 mb-5">
    <!-- Page Title -->
    <div class="row mb-4">
      <div class="col-md-8">
        <h1 id="page-title">Dashboard</h1>
      </div>
      <div class="col-md-4 text-end">
        <button id="add-button" class="btn btn-primary" style="display: none;">
          <i class="bi bi-plus-circle"></i> Add New
        </button>
      </div>
    </div>

    <!-- Alerts -->
    <div id="alert-container"></div>

    <!-- Loading Spinner -->
    <div id="loading-spinner" class="text-center my-5" style="display: none;">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-2">Loading data...</p>
    </div>

    <!-- Page Content -->
    <div id="page-content">
      <!-- Dashboard Page -->
      <div id="dashboard-page" class="page-section">
        <!-- Summary Cards -->
        <div class="row row-cols-1 row-cols-md-4 g-4 mb-4">
          <div class="col">
            <div class="card h-100 bg-primary text-white">
              <div class="card-body">
                <h5 class="card-title">Total Projects</h5>
                <p class="card-text display-4" id="total-projects">0</p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 bg-success text-white">
              <div class="card-body">
                <h5 class="card-title">Active Projects</h5>
                <p class="card-text display-4" id="active-projects">0</p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 bg-warning text-dark">
              <div class="card-body">
                <h5 class="card-title">Upcoming Tasks</h5>
                <p class="card-text display-4" id="upcoming-tasks">0</p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 bg-danger text-white">
              <div class="card-body">
                <h5 class="card-title">Overdue Tasks</h5>
                <p class="card-text display-4" id="overdue-tasks">0</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Project Categories -->
        <div class="row mb-4">
          <div class="col-md-6">
            <div class="card">
              <div class="card-header bg-dark text-white">
                Project Categories
              </div>
              <div class="card-body">
                <canvas id="categories-chart"></canvas>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card">
              <div class="card-header bg-dark text-white">
                Task Priorities
              </div>
              <div class="card-body">
                <canvas id="priorities-chart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="card">
          <div class="card-header bg-dark text-white">
            Recent Activity
          </div>
          <div class="card-body">
            <div class="list-group" id="recent-activity">
              <!-- Populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>

      <!-- Projects Page -->
      <div id="projects-page" class="page-section" style="display: none;">
        <div class="card">
          <div class="card-body">
            <div class="row mb-3">
              <div class="col-md-4">
                <select id="project-filter" class="form-select">
                  <option value="">All Categories</option>
                  <option value="music_production">Music Production</option>
                  <option value="trading">Trading</option>
                  <option value="content_creation">Content Creation</option>
                  <option value="technology">Technology</option>
                  <option value="business">Business</option>
                </select>
              </div>
              <div class="col-md-4">
                <select id="status-filter" class="form-select">
                  <option value="">All Statuses</option>
                  <option value="planned">Planned</option>
                  <option value="in_progress">In Progress</option>
                  <option value="on_hold">On Hold</option>
                  <option value="completed">Completed</option>
                  <option value="cancelled">Cancelled</option>
                </select>
              </div>
              <div class="col-md-4">
                <div class="input-group">
                  <input type="text" id="project-search" class="form-control" placeholder="Search projects...">
                  <button class="btn btn-outline-secondary" type="button" id="clear-search">
                    <i class="bi bi-x"></i>
                  </button>
                </div>
              </div>
            </div>
            
            <div class="table-responsive">
              <table class="table table-hover">
                <thead class="table-dark">
                  <tr>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Status</th>
                    <th>Timeline</th>
                    <th>Progress</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="projects-table-body">
                  <!-- Populated by JavaScript -->
                </tbody>
              </table>
            </div>
            
            <div id="projects-pagination" class="d-flex justify-content-center mt-3">
              <!-- Populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>

      <!-- Tasks Page -->
      <div id="tasks-page" class="page-section" style="display: none;">
        <div class="card">
          <div class="card-body">
            <div class="row mb-3">
              <div class="col-md-3">
                <select id="task-project-filter" class="form-select">
                  <option value="">All Projects</option>
                  <!-- Populated by JavaScript -->
                </select>
              </div>
              <div class="col-md-3">
                <select id="task-status-filter" class="form-select">
                  <option value="">All Statuses</option>
                  <option value="todo">To Do</option>
                  <option value="in_progress">In Progress</option>
                  <option value="review">Review</option>
                  <option value="done">Done</option>
                </select>
              </div>
              <div class="col-md-3">
                <select id="task-priority-filter" class="form-select">
                  <option value="">All Priorities</option>
                  <option value="low">Low</option>
                  <option value="medium">Medium</option>
                  <option value="high">High</option>
                  <option value="urgent">Urgent</option>
                </select>
              </div>
              <div class="col-md-3">
                <div class="input-group">
                  <input type="text" id="task-search" class="form-control" placeholder="Search tasks...">
                  <button class="btn btn-outline-secondary" type="button" id="clear-task-search">
                    <i class="bi bi-x"></i>
                  </button>
                </div>
              </div>
            </div>
            
            <div class="table-responsive">
              <table class="table table-hover">
                <thead class="table-dark">
                  <tr>
                    <th>Name</th>
                    <th>Project</th>
                    <th>Status</th>
                    <th>Priority</th>
                    <th>Due Date</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="tasks-table-body">
                  <!-- Populated by JavaScript -->
                </tbody>
              </table>
            </div>
            
            <div id="tasks-pagination" class="d-flex justify-content-center mt-3">
              <!-- Populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>

      <!-- Timeline Page -->
      <div id="timeline-page" class="page-section" style="display: none;">
        <div class="card mb-4">
          <div class="card-header bg-dark text-white">
            Timeline Options
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-5">
                <div class="mb-3">
                  <label for="timeline-start" class="form-label">Start Date</label>
                  <input type="date" class="form-control" id="timeline-start">
                </div>
              </div>
              <div class="col-md-5">
                <div class="mb-3">
                  <label for="timeline-end" class="form-label">End Date</label>
                  <input type="date" class="form-control" id="timeline-end">
                </div>
              </div>
              <div class="col-md-2 d-flex align-items-end">
                <button id="update-timeline" class="btn btn-primary w-100 mb-3">Update</button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header bg-dark text-white">
            2025 Business Timeline
          </div>
          <div class="card-body">
            <div id="timeline-container" class="timeline-container">
              <!-- Populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>

      <!-- Project Detail Page -->
      <div id="project-detail-page" class="page-section" style="display: none;">
        <!-- Populated by JavaScript -->
      </div>

      <!-- Task Detail Page -->
      <div id="task-detail-page" class="page-section" style="display: none;">
        <!-- Populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Modals -->
  <!-- New Project Modal -->
  <div class="modal fade" id="project-modal" tabindex="-1" aria-labelledby="project-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="project-modal-label">Add New Project</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="project-form">
            <input type="hidden" id="project-id">
            <div class="mb-3">
              <label for="project-name" class="form-label">Project Name</label>
              <input type="text" class="form-control" id="project-name" required>
            </div>
            <div class="mb-3">
              <label for="project-description" class="form-label">Description</label>
              <textarea class="form-control" id="project-description" rows="3"></textarea>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="project-category" class="form-label">Category</label>
                  <select class="form-select" id="project-category" required>
                    <option value="music_production">Music Production</option>
                    <option value="trading">Trading</option>
                    <option value="content_creation">Content Creation</option>
                    <option value="technology">Technology</option>
                    <option value="business">Business</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="project-status" class="form-label">Status</label>
                  <select class="form-select" id="project-status" required>
                    <option value="planned">Planned</option>
                    <option value="in_progress">In Progress</option>
                    <option value="on_hold">On Hold</option>
                    <option value="completed">Completed</option>
                    <option value="cancelled">Cancelled</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="project-start-date" class="form-label">Start Date</label>
                  <input type="date" class="form-control" id="project-start-date" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="project-end-date" class="form-label">End Date</label>
                  <input type="date" class="form-control" id="project-end-date" required>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="project-revenue-target" class="form-label">Revenue Target ($)</label>
                  <input type="number" class="form-control" id="project-revenue-target" min="0" step="100" value="0">
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="project-revenue-actual" class="form-label">Revenue Actual ($)</label>
                  <input type="number" class="form-control" id="project-revenue-actual" min="0" step="100" value="0">
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label for="project-tags" class="form-label">Tags (comma-separated)</label>
              <input type="text" class="form-control" id="project-tags">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="save-project">Save Project</button>
        </div>
      </div>
    </div>
  </div>

  <!-- New Task Modal -->
  <div class="modal fade" id="task-modal" tabindex="-1" aria-labelledby="task-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="task-modal-label">Add New Task</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="task-form">
            <input type="hidden" id="task-id">
            <div class="mb-3">
              <label for="task-name" class="form-label">Task Name</label>
              <input type="text" class="form-control" id="task-name" required>
            </div>
            <div class="mb-3">
              <label for="task-description" class="form-label">Description</label>
              <textarea class="form-control" id="task-description" rows="3"></textarea>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="task-project" class="form-label">Project</label>
                  <select class="form-select" id="task-project" required>
                    <!-- Populated by JavaScript -->
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="task-status" class="form-label">Status</label>
                  <select class="form-select" id="task-status" required>
                    <option value="todo">To Do</option>
                    <option value="in_progress">In Progress</option>
                    <option value="review">Review</option>
                    <option value="done">Done</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="task-priority" class="form-label">Priority</label>
                  <select class="form-select" id="task-priority" required>
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                    <option value="urgent">Urgent</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="task-due-date" class="form-label">Due Date</label>
                  <input type="date" class="form-control" id="task-due-date">
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label for="task-assignee" class="form-label">Assignee</label>
              <input type="text" class="form-control" id="task-assignee">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="save-task">Save Task</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal fade" id="confirm-delete-modal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Confirm Delete</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p id="delete-message">Are you sure you want to delete this item?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" id="confirm-delete-button">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="/js/api.js"></script>
  <script src="/js/ui.js"></script>
  <script src="/js/app.js"></script>
</body>
</html>
